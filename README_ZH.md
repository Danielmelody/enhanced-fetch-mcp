# Enhanced Fetch MCP

[English](./README.md) | ç®€ä½“ä¸­æ–‡

**ä¸€ä¸ªä¸º AI è€Œç”Ÿçš„ Web äº¤äº’å±‚ï¼Œå®ƒå°† Playwright ä»ä¸€ä¸ªå¼€å‘è€…å·¥å…·â€œå‡ç»´â€æˆä¸ºä¸€ä¸ªä¸º AI Agent æœåŠ¡çš„ã€æ™ºèƒ½ã€å®‰å…¨ä¸”é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚**

| åŠŸèƒ½ | Claude åŸç”Ÿ Fetch | æ ‡å‡† Playwright | Enhanced Fetch MCP |
| :--- | :--- | :--- | :--- |
| **å†…å®¹æå–** | åŸºç¡€ | æ‰‹åŠ¨è§£æ | **é«˜çº§**: æå–ä¸»è¦å†…å®¹ã€å…ƒæ•°æ®ã€é“¾æ¥å’Œå›¾ç‰‡ï¼Œå¹¶ç”Ÿæˆå¹²å‡€çš„ Markdownã€‚ |
| **JavaScript æ¸²æŸ“** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | **âœ… æ”¯æŒ**: ä¸ºåŠ¨æ€é¡µé¢æä¾›å®Œæ•´çš„æµè§ˆå™¨æ¸²æŸ“ã€‚ |
| **å®‰å…¨æ€§** | âœ… å®‰å…¨ | âš ï¸ æµè§ˆå™¨æ²™ç®± | **ğŸ”’ æœ€é«˜å®‰å…¨**: æ‰€æœ‰æ“ä½œéƒ½åœ¨ Docker å®¹å™¨ä¸­éš”ç¦»æ‰§è¡Œã€‚ |
| **èµ„æºæ•ˆç‡** | é«˜ | ä½ | **æ··åˆå¼•æ“**: æ™ºèƒ½åœ°åœ¨è½»é‡çº§ HTTP å’Œå®Œæ•´æµè§ˆå™¨ä¹‹é—´åˆ‡æ¢ã€‚ |
| **æˆªå›¾ & PDF** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | **âœ… æ”¯æŒ**: æ•è·æˆªå›¾å¹¶ç”Ÿæˆ PDFã€‚ |
| **æ§åˆ¶ä¸å®šåˆ¶** | æœ‰é™ | é«˜ | **å®Œå…¨æ§åˆ¶**: å¯å®šåˆ¶çš„è¯·æ±‚å¤´ã€è¶…æ—¶ç­‰ã€‚ |

---

## å¿«é€Ÿä¸Šæ‰‹

### é€‰é¡¹ 1: æœ¬åœ°å®‰è£…

**1. å®‰è£…:**
```bash
npm install -g enhanced-fetch-mcp
```

**2. é…ç½® Claude Code (`~/.config/claude/config.json`):**
```json
{
  "mcpServers": { "enhanced-fetch": { "command": "enhanced-fetch-mcp" } }
}
```

**3. ä½¿ç”¨:**
> â€œå¸®æˆ‘è·å– `https://example.com` çš„ä¸»è¦å†…å®¹å¹¶æˆªå›¾ã€‚â€

### é€‰é¡¹ 2: é€šè¿‡ Smithery å®‰è£…

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Smithery æ¥ç®€åŒ–å®‰è£…å’Œé…ç½®æµç¨‹ã€‚

**é€šè¿‡ Smithery å®‰è£…:**
[https://smithery.ai/server/@Danielmelody/enhanced-fetch-mcp](https://smithery.ai/server/@Danielmelody/enhanced-fetch-mcp)

Smithery ä¼šè‡ªåŠ¨å¤„ç†å®‰è£…ã€ä¾èµ–ç®¡ç†å’Œ MCP é…ç½®ã€‚**é‡è¦æç¤ºï¼š** æœåŠ¡å™¨å®Œå…¨è¿è¡Œåœ¨ä½ çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œä¸ä¼šå°†ä»»ä½•æ•°æ®å‘é€åˆ°å¤–éƒ¨æœåŠ¡å™¨ã€‚ä½ å¯ä»¥å®Œå…¨æ§åˆ¶æµè§ˆæ´»åŠ¨ã€æˆªå›¾å’Œæå–çš„å†…å®¹ï¼Œç¡®ä¿æœ€é«˜çº§åˆ«çš„éšç§å’Œå®‰å…¨æ€§ã€‚

---

## å·¥å…·

#### ç½‘é¡µæŠ“å–å·¥å…·ï¼ˆ3ä¸ªï¼‰

| å·¥å…· | æè¿° |
|------|------|
| `fetch_url` | ç›´æ¥å‘ URL å‘é€ HTTP è¯·æ±‚ä»¥è·å–å…¶åŸå§‹ HTML å†…å®¹ã€‚æ”¯æŒå¤šç§æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€è‡ªå®šä¹‰è¯·æ±‚å¤´å’Œå…¶ä»–é«˜çº§é€‰é¡¹ã€‚ |
| `extract_content` | è§£æåŸå§‹ HTML ä»¥æå–ç»“æ„åŒ–ä¿¡æ¯ã€‚å®ƒèƒ½è¯†åˆ«å¹¶æ¸…ç†ä¸»è¦æ–‡ç« å†…å®¹ï¼Œå¹¶ä»¥å¤šç§æ ¼å¼ï¼ˆæ–‡æœ¬ã€Markdown å’Œ HTMLï¼‰è¿”å›ï¼ŒåŒæ—¶é™„å¸¦å…ƒæ•°æ®ã€é“¾æ¥å’Œå›¾ç‰‡ã€‚ |
| `fetch_and_extract` | ä¸€ä¸ªæ–¹ä¾¿çš„ä¸€ä½“åŒ–å·¥å…·ï¼Œå®ƒé¦–å…ˆè·å– URLï¼Œç„¶åè‡ªåŠ¨æå–å…¶å†…å®¹ã€‚å®ƒèƒ½æ™ºèƒ½åˆ¤æ–­æ˜¯ä½¿ç”¨ç®€å•çš„ HTTP è¯·æ±‚è¿˜æ˜¯å®Œæ•´çš„æµè§ˆå™¨ç¯å¢ƒã€‚ |

#### æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆ8ä¸ªï¼‰

| å·¥å…· | æè¿° |
|------|------|
| `create_browser_context` | åˆå§‹åŒ–å¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„ã€éš”ç¦»çš„æµè§ˆå™¨å®ä¾‹ï¼ˆå¦‚ Chromeã€Firefox æˆ– WebKitï¼‰ï¼Œå¸¦æœ‰ä¸€ä¸ªå¹²å‡€çš„ä¼šè¯ï¼Œå¹¶è¿”å›ä¸€ä¸ªç”¨äºåç»­æ“ä½œçš„å”¯ä¸€ IDã€‚ |
| `browser_navigate` | æŒ‡ç¤ºç‰¹å®šçš„æµè§ˆå™¨å®ä¾‹è®¿é—®ä¸€ä¸ª URLï¼Œå¹¶ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆï¼ŒåŒ…æ‹¬æ‰§è¡Œä»»ä½•åˆå§‹çš„ JavaScriptã€‚ |
| `browser_get_content` | åœ¨æµè§ˆå™¨æ¸²æŸ“é¡µé¢åï¼Œè·å–å®Œæ•´çš„ HTMLï¼Œç¡®ä¿æ‰€æœ‰åŠ¨æ€å†…å®¹éƒ½å·²ç”Ÿæˆã€‚ |
| `browser_screenshot` | æ•è·æµè§ˆå™¨ä¸­å½“å‰é¡µé¢çš„è§†è§‰å¿«ç…§ï¼Œå¯ä»¥æ˜¯æ•´ä¸ªé¡µé¢æˆ–ç‰¹å®šåŒºåŸŸï¼Œå¹¶è¿”å›å›¾åƒæ•°æ®ã€‚ |
| `browser_pdf` | ä»å½“å‰é¡µé¢çš„å†…å®¹ç”Ÿæˆä¸€ä¸ª PDF æ–‡æ¡£ï¼Œæä¾›ä¸€ä¸ªå¯æ‰“å°çš„ã€ç¦»çº¿çš„ç½‘é¡µç‰ˆæœ¬ã€‚ |
| `browser_execute_js` | åœ¨å½“å‰é¡µé¢çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œè‡ªå®šä¹‰çš„ JavaScript ä»£ç ç‰‡æ®µï¼Œä»è€Œèƒ½å¤Ÿä¸é¡µé¢å…ƒç´ äº¤äº’æˆ–æ£€ç´¢æ•°æ®ã€‚ |
| `list_browser_contexts` | è¿”å›æ‰€æœ‰å½“å‰å·²åˆ›å»ºçš„æ´»åŠ¨æµè§ˆå™¨å®ä¾‹çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ ID å’ŒçŠ¶æ€ã€‚ |
| `close_browser_context` | ç»ˆæ­¢ä¸€ä¸ªæµè§ˆå™¨å®ä¾‹å¹¶æ¸…ç†æ‰€æœ‰ç›¸å…³èµ„æºï¼ŒåŒ…æ‹¬å…³é—­å…¶æ‰€æœ‰é¡µé¢å’Œé‡Šæ”¾å†…å­˜ã€‚ |

#### Docker æ²™ç®±å·¥å…·ï¼ˆ8ä¸ªï¼‰

| å·¥å…· | æè¿° |
|------|------|
| `create_sandbox` | ä½¿ç”¨æŒ‡å®šçš„é•œåƒåˆ›å»ºä¸€ä¸ªæ–°çš„ã€å®‰å…¨çš„ Docker å®¹å™¨ï¼Œä¸ºå‘½ä»¤æ‰§è¡Œæä¾›ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒã€‚ |
| `execute_in_sandbox` | åœ¨æŒ‡å®šçš„ Docker æ²™ç®±å†…è¿è¡Œä¸€ä¸ª shell å‘½ä»¤ï¼Œå¹¶è¿”å›å…¶æ ‡å‡†è¾“å‡ºã€é”™è¯¯å’Œé€€å‡ºç ã€‚ |
| `list_sandboxes` | æä¾›æ‰€æœ‰å½“å‰è¿è¡Œçš„ Docker æ²™ç®±çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ IDã€åç§°å’Œå½“å‰çŠ¶æ€ã€‚ |
| `get_sandbox` | æ£€ç´¢æœ‰å…³ç‰¹å®šæ²™ç®±çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å…¶é…ç½®ã€è¿è¡ŒçŠ¶æ€å’Œç½‘ç»œè®¾ç½®ã€‚ |
| `pause_sandbox` | æš‚æ—¶å†»ç»“ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„æ²™ç®±ï¼Œåœ¨æ¶ˆè€—æœ€å°‘ CPU èµ„æºçš„åŒæ—¶ä¿ç•™å…¶çŠ¶æ€ã€‚ |
| `resume_sandbox` | å–æ¶ˆæš‚åœå…ˆå‰æš‚åœçš„æ²™ç®±ï¼Œä½¿å…¶ä»ä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œã€‚ |
| `cleanup_sandbox` | åœæ­¢å¹¶å®Œå…¨ç§»é™¤ä¸€ä¸ªæ²™ç®±å®¹å™¨ï¼Œåˆ é™¤å…¶æ–‡ä»¶ç³»ç»Ÿå¹¶é‡Šæ”¾æ‰€æœ‰ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚ |
| `get_sandbox_stats` | è·å–æ²™ç®±çš„å®æ—¶èµ„æºä½¿ç”¨æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ CPUã€å†…å­˜å’Œç½‘ç»œ I/Oã€‚ |

### ä½¿ç”¨ç¤ºä¾‹

#### ç®€å•ç½‘é¡µæŠ“å–

```
ç”¨æˆ·ï¼šè·å– https://example.com çš„å†…å®¹

Claude è‡ªåŠ¨è°ƒç”¨ fetch_and_extractï¼š
â†’ è·å– HTML
â†’ æå–æ ‡é¢˜ã€æè¿°ã€æ­£æ–‡
â†’ è½¬æ¢ä¸º Markdown
â†’ è¿”å›ç»“æ„åŒ–å†…å®¹
```

#### JavaScript æ¸²æŸ“é¡µé¢

```
ç”¨æˆ·ï¼šè¿™ä¸ªé¡µé¢éœ€è¦æµè§ˆå™¨æ¸²æŸ“

Claude è‡ªåŠ¨ä½¿ç”¨æµè§ˆå™¨å·¥å…·ï¼š
â†’ åˆ›å»ºæµè§ˆå™¨ä¸Šä¸‹æ–‡
â†’ å¯¼èˆªåˆ°é¡µé¢
â†’ ç­‰å¾… JavaScript æ‰§è¡Œå®Œæˆ
â†’ è·å–å®Œæ•´æ¸²æŸ“çš„å†…å®¹
```

#### ç½‘é¡µæˆªå›¾

```
ç”¨æˆ·ï¼šç»™è¿™ä¸ªé¡µé¢æˆªä¸ªå›¾

Claude è‡ªåŠ¨è°ƒç”¨æµè§ˆå™¨æˆªå›¾ï¼š
â†’ æ‰“å¼€é¡µé¢
â†’ ç­‰å¾…åŠ è½½å®Œæˆ
â†’ æˆªå–å…¨é¡µé¢æˆªå›¾
â†’ è¿”å› PNG å›¾ç‰‡
```

### ç³»ç»Ÿè¦æ±‚

#### å¿…éœ€

- Node.js >= 18.0.0
- npm >= 8.0.0

#### å¯é€‰ï¼ˆç”¨äºç‰¹å®šåŠŸèƒ½ï¼‰

- Dockerï¼ˆç”¨äºæ²™ç®±åŠŸèƒ½ï¼‰
- è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ï¼ˆPlaywright æµè§ˆå™¨çº¦ 300MBï¼‰

### éªŒè¯å®‰è£…

```bash
# æ£€æŸ¥å‘½ä»¤æ˜¯å¦å¯ç”¨
enhanced-fetch-mcp --version
# è¾“å‡º: v1.0.0

# æŸ¥çœ‹å¸®åŠ©
enhanced-fetch-mcp --help

# æµ‹è¯•è¿è¡Œï¼ˆCtrl+C é€€å‡ºï¼‰
enhanced-fetch-mcp
# è¾“å‡º: Enhanced Fetch MCP Server running on stdio
```

### æ•…éšœæ’æŸ¥

#### å‘½ä»¤æ‰¾ä¸åˆ°

```bash
# æ£€æŸ¥å®‰è£…
npm list -g enhanced-fetch-mcp

# é‡æ–°å®‰è£…
npm install -g enhanced-fetch-mcp

# æ£€æŸ¥è·¯å¾„
which enhanced-fetch-mcp
```

#### Docker æœªè¿è¡Œï¼ˆå½±å“æ²™ç®±åŠŸèƒ½ï¼‰

```bash
# macOS
open -a Docker

# Linux
sudo systemctl start docker

# éªŒè¯
docker ps
```

#### æŸ¥çœ‹æ—¥å¿—

```bash
# æœåŠ¡å™¨æ—¥å¿—
tail -f ~/.local/share/enhanced-fetch-mcp/logs/browser-mcp.log

# é”™è¯¯æ—¥å¿—
tail -f ~/.local/share/enhanced-fetch-mcp/logs/browser-mcp-error.log
```

### æ›´æ–°

```bash
npm update -g enhanced-fetch-mcp
```

### å¼€å‘

#### ä»æºç å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/enhanced-fetch-mcp.git
cd enhanced-fetch-mcp

# å®‰è£…ä¾èµ–
npm install

# æ„å»º
npm run build

# å…¨å±€é“¾æ¥ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
npm link

# è¿è¡Œæµ‹è¯•
npm test

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬å˜åŒ–ï¼‰
npm run dev
```

### æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | å¹³å‡è€—æ—¶ |
|------|----------|
| HTTP è¯·æ±‚ | 200-300ms |
| å†…å®¹æå– | 10-50ms |
| æµè§ˆå™¨å¯åŠ¨ | 300-500ms |
| é¡µé¢å¯¼èˆª | 1.5-2s |
| æˆªå›¾ | ~50ms |
| JavaScript æ‰§è¡Œ | <10ms |

### è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æäº¤ Pull Request æˆ–åˆ›å»º Issueã€‚

### è®¸å¯è¯

MIT License

### è‡´è°¢

- [@modelcontextprotocol/sdk](https://github.com/modelcontextprotocol/sdk) - MCP åè®®å®ç°
- [Playwright](https://playwright.dev/) - æµè§ˆå™¨è‡ªåŠ¨åŒ–
- [Cheerio](https://cheerio.js.org/) - HTML è§£æ
- [Turndown](https://github.com/mixmark-io/turndown) - HTML è½¬ Markdown
- [Dockerode](https://github.com/apocas/dockerode) - Docker API
